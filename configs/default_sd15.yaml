seed: 42
output_dir: runs/nifi_sd15
image_size: 256
rates:
  - rate_0.100

runtime:
  device: cuda
  device_id: 0
  deterministic: false
  allow_tf32: true
  cudnn_benchmark: true
  pin_memory: true
  persistent_workers: true
  prefetch_factor: 2
  non_blocking: true
  empty_cache_before_eval: false

model:
  pretrained_model_name_or_path: runwayml/stable-diffusion-v1-5
  guidance_scale: 7.5
  prompt_dropout: 0.1
  lora_rank: 64
  max_token_length: 77
  vae_scaling_factor: 0.18215

diffusion:
  num_train_timesteps: 1000
  t0: 0
  t_ablation_full: false

train:
  batch_size: 1
  num_workers: 2
  max_steps: 60000
  grad_accum_steps: 1
  lr_phi_minus: 5.0e-6
  lr_phi_plus: 1.0e-6
  weight_decay: 1.0e-4
  grad_clip: 1.0
  log_every: 10
  eval_every: 100
  save_every: 100
  mixed_precision: fp16
  gradient_checkpointing: false
  max_train_samples: null
  max_eval_samples: null

loss_weights:
  alpha: 0.7
  kl: 1.0
  gt: 1.0
  l2: 1.0
  lpips: 1.0
  dists: 0.0

compression:
  method: proxy
  jpeg_quality_min: 8
  jpeg_quality_max: 55
  downsample_min: 2
  downsample_max: 8

smoke_test:
  enabled: false
  num_images: 10
  train_steps: 100

